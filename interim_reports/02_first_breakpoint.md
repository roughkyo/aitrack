# 🛑 First Breakpoint: AI 이수 트랙 추천 시스템 고도화

## 📅 작성일: 2026-01-27
## 🎯 목표: AI 추천 정확도 향상 및 실시간 데이터 연동 구현

이 리포트는 프로젝트의 초기 프로토타입 개발 이후, **실시간 데이터 연동**과 **AI 추천 로직의 정교화**를 완료한 시점을 기록한 브레이크포인트입니다.

---

## 🚀 주요 성과 및 변경 사항

### 1. Google Sheets 실시간 데이터 연동 구현
- **기존**: 정적 CSV 파일(`primary_data/programs.csv`)을 빌드 타임에 포함.
- **변경**: 앱 실행 시 Google Sheets의 CSV Export URL을 통해 실시간으로 데이터를 fetch.
- **효과**: 프로그램 내용 수정, 일정 변경 등이 발생해도 **재배포 없이 즉시 반영** 가능.
- **구현 파일**: `src/lib/googleSheets.js`, `src/App.jsx`

### 2. AI 프롬프트 엔지니어링 강화 (추천 정확도 해결)
AI가 없는 프로그램명("생태지도 작성" 등)을 조작해내는 환각(Hallucination) 현상을 해결하기 위해 프롬프트를 대폭 수정했습니다.

- **프로그램명 리스트 하드코딩**: Google Sheets의 B열에 존재하는 **22개의 정확한 프로그램명**을 프롬프트에 명시. "이 리스트에 없는 이름은 절대 사용 금지" 규칙 적용.
- **성향별 추천 개수 로직 세분화**:
  - **탐구 몰입형**: 다양한 경험 중시 → 학년당 **3~5개** 권장.
  - **학업 집중형**: 핵심 활동 집중 → 학년당 **2~3개** 권장.
- **운영 시기 표기 강제**: 모든 프로그램 뒤에 `(1학기)`, `(4월~7월)` 등 구체적 시기 명시. 정보 부재 시 `(운영시기 확인필요)` 출력.

### 3. UI/UX 및 인증 로직 개선
- **버튼 UI**: "전체 프로그램 보기", "고화질 저장하기" 버튼의 텍스트 줄바꿈 및 레이아웃 최적화.
- **학번 정규화**: 4자리 학번(예: `1803`) 입력 시 자동으로 5자리 표준 포맷(`10803`)으로 변환하여 로그인 허용.
- **로딩 피드백**: 프로그램 데이터 로딩 중임을 알리는 UI 메시지 추가.

### 4. 설명 가능한 AI (XAI) 시각화
- AI가 어떤 논리로 트랙을 추천하는지 보여주는 **[AI 추천 알고리즘 순서도](./AI_추천_알고리즘_순서도.md)** 문서 작성.
- 11단계 필터링 및 의사결정 과정을 시각화하여 사용자와 관리자에게 투명성 제공.

---

## 📂 파일 구조 현황 (주요 변경 파일)

```
/
├── src/
│   ├── App.jsx            # Google Sheets 데이터 로드, UI 변경, 학번 정규화
│   ├── lib/
│   │   ├── gemini.js      # 프롬프트 강화 (프로그램명 리스트, 성향별 로직)
│   │   └── googleSheets.js # [New] CSV Fetch 유틸리티
│   └── ...
├── functions/
│   └── index.js           # Firebase Functions용 프롬프트 동기화
├── interim_reports/
│   ├── 02_first_breakpoint.md # [New] 현재 파일
│   └── AI_추천_알고리즘_순서도.md # [New] 알고리즘 설명 문서
└── ...
```

---

## ⚠️ 기술적 부채 및 고려사항

1. **프롬프트 길이**: 정확성을 위해 프로그램명 리스트를 모두 포함시켰으나, 프로그램 개수가 100개 이상으로 늘어날 경우 토큰 효율성을 위해 RAG(검색 증강 생성) 방식이나 별도의 필터링 로직 도입이 필요할 수 있습니다. 현재(22개)는 하드코딩이 가장 확실하고 빠릅니다.
2. **Google Sheets 권한**: "링크가 있는 모든 사용자에게 공개" 설정이 유지되어야 데이터 로드가 가능합니다.

---

## 🔜 다음 단계 (Next Steps)

1. **프로덕션 배포**: Firebase Hosting 및 Functions 배포.
2. **사용자 테스트**: 실제 학생/교사 계정으로 다양한 케이스(성향별, 진로별) 테스트 진행.
3. **피드백 수집**: "운영시기 확인필요"가 뜨는 항목들에 대해 Google Sheets 데이터 보완 요청.

---
**작성자**: Antigravity (AI Agent)
**상태**: ✅ First Breakpoint 도달. 주요 기능 구현 완료.
