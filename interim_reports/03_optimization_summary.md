# 🚀 AI 이수 트랙 추천 시스템 고도화 작업 요약

## 📅 작성일: 2026-01-27
## 🎯 목표: 시스템 안정성 확보 및 사용자 경험(UX) 극대화

First Breakpoint 이후 진행된 시스템 고도화 및 품질 개선 작업 내용을 정리합니다.

---

## 🛠️ 주요 업데이트 사항

### 1. API 비용 관리 및 어뷰징 방지 (Rate Limiting)
- **기능**: 브라우저(클라이언트) 단에서 1시간당 최대 **10회**까지 추천 생성 제한.
- **구현**:
  - `localStorage`에 타임스탬프 기록 및 관리.
  - 10회 초과 시 경고창(`alert`) 출력 및 API 호출 차단.
- **UI 개선**: "트랙 생성하기" 버튼 하단에 **[⏳ 1시간당 남은 생성 횟수: N회 / 10회]**를 실시간으로 표시하여 사용자에게 명확한 피드백 제공.

### 2. 전문가 고도화 전략: 스토리텔링 도입
- **기존 문제**: AI의 전략 설명이 단순하고 입체적이지 못함.
- **개선**: 학생의 3년 성장 과정을 생생하게 그릴 수 있는 **스토리텔링 템플릿** 적용.
  - **1학년**: [전공]의 진짜 재미를 발견하는 시기
  - **2학년**: 이론을 현실에 적용하는 시기
  - **3학년**: 대학 [전공]의 문을 미리 여는 시기
  - **결론**: 대입(단기) 및 진로(장기) 관점에서의 이점
- **기술**: `react-markdown` 라이브러리를 도입하여 헤더, 리스트, 강조 구문 등 Rich Text 렌더링 지원.

### 3. AI 할루시네이션(Hallucination) 및 오류 해결
- **분과 명칭 정확성 확보**:
  - 문제: AI가 "생태환경 분과" 등 실제 데이터에 없는 분과명을 생성.
  - 해결: Google Sheets 데이터에 기반한 **7개 실제 분과 리스트**를 프롬프트에 하드코딩하고, 이 중에서만 선택하도록 강제.
  - [가능한 분과]: 이차전지, 기계공학, AI융합, 지속가능발전, 지역역사, 문화경제, 우주과학, 공간 예술/건축

- **대상 학년 정합성 검증 강화**:
  - 문제: 1학년 대상 프로그램(예: 인성함양 프로젝트)이 3학년 트랙에 추천됨.
  - 해결: **"대상학년 검증"을 절대 규칙으로 추가**. 프로그램의 '대상학년' 컬럼에 해당 학년이 포함되어 있는지 교차 검증하도록 LLM 지시 강화.

---

## 📂 변경된 파일 목록

1.  `src/App.jsx`
    - API Rate Limiting 로직 및 UI 추가.
    - `react-markdown` 적용 및 렌더링 로직 수정.
2.  `src/lib/gemini.js`
    - 프롬프트 대폭 수정: 스토리텔링 가이드, 분과 리스트 명시, 대상학년 검증 규칙 추가.
3.  `functions/index.js`
    - 프로덕션용 프롬프트 동기화 (gemini.js와 동일한 규칙 적용).
4.  `src/index.css`
    - Markdown 컨텐츠 스타일링(헤더 크기, 마진 등) 추가.

---

## 📝 향후 권장 사항
- **Google Sheets 데이터 관리**: 프로그램의 '운영기간'이나 '대상학년' 정보가 비어있지 않도록 지속적인 관리 필요. (AI가 "확인필요"를 띄우지 않도록)
- **모니터링**: 사용자들이 API 제한(10회)에 불편함을 느끼는지 피드백 수집 필요.

---
**작성자**: Antigravity (AI Agent)
**상태**: ✅ 고도화 작업 완료. 배포 준비 완료.
