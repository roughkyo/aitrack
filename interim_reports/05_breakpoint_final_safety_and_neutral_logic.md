# Interim Report: 브레이크포인트 05 - 최종 고도화 및 안정화

**작성일**: 2026-01-28
**상태**: 완료 (배포 완료)

## 📌 개요
Gemini API 버전 이슈 해결부터 활동 재배치 엔진 고도화, 비속어 필터링, 그리고 진로 미정 학생을 위한 중립 로드맵 설계까지 모든 핵심 기능을 완성하고 안정화했습니다. 이 문서는 현재의 성공적인 상태를 보존하기 위한 브레이크포인트 문서입니다.

## 🛠 주요 변경 및 해결 사항

### 1. AI 엔진 최적화 및 에러 해결
- **API 버전 명시**: `v1beta` 엔드포인트를 명시하여 `gemini-3-flash-preview` 모델의 구조화된 데이터(JSON) 출력을 안정화했습니다.
- **JSON 파싱 견고화**: AI 응답에 포함될 수 있는 마크다운 코드 블록(```json)을 사전에 제거하는 전처리 로직을 추가하여 런타임 에러를 원천 차단했습니다.

### 2. 활동 재배치 엔진(Step 2) 고도화
- **학년 적합성 검증(Strict Grade Check)**: AI 추천 이후 시스템 배치 단계에서 CSV 데이터의 '대상 학년'을 다시 한번 대조하여, 참여 불가능한 학년에 활동이 배치되는 문제를 해결했습니다. (예: 데이터과학 해커톤 1학년 배치 금지)
- **상호 배타적 프로젝트 분산**: 인문사회/수리과학 주제탐구 프로젝트가 한 학년에 겹치지 않도록 하드코딩 로직을 강화하고, 1학년과 3학년으로 엄격하게 분산 배치했습니다.
- **데이터 명칭 싱크**: CSV 데이터와 코드 내의 공백/특수문자 차이를 동기화하여 매칭률을 100%로 끌어올렸습니다.

### 3. 전문가 고도화 전략 품질 개선
- **마크다운 가독성**: 학년별 제목(##) 앞에 강제 줄바꿈(\n\n)을 추가하여 텍스트 뭉침 현상을 해결했습니다.
- **서사 중심성**: 본문에서 교과목(Courses) 언급을 완전히 배제하고 오직 활동(Activities)을 중심으로 서사를 작성하도록 규칙을 강화했습니다.
- **문체 조정**: 과거형(~했습니다) 대신 미래 지향적인 현재/추천형(~합니다, ~하는 것을 추천합니다)을 사용하도록 변경했습니다.

### 4. 사용자 경험 및 안정성 강화
- **비속어 필터링**: 입력값에 비속어 포함 시 AI 호출을 차단하고 세련된 경고 모달창을 띄우는 기능을 구현했습니다.
- **진로 미정(Undecided) 로직**: 진로를 결정하지 못한 학생들을 위해 인문/자연 활동을 5:5로 섞은 '밸런스형 무전공 설계 트랙'을 제공하도록 AI 지침을 추가했습니다.

## 📂 관련 파일
- `src/lib/gemini.js`: 전체 AI 추천 및 재배치 엔진 핵심 로직
- `src/App.jsx`: UI 인터랙션, 비속어 필터링 및 모달 로직
- `primary_data/programs.csv`: 활동 배치의 기준이 되는 원본 데이터

## 🚀 배포 정보
- **플랫폼**: Firebase Hosting
- **URL**: [https://gyh-ai-track.web.app](https://gyh-ai-track.web.app)

---
*이 문서는 시스템의 주요 기능이 완성된 '브레이크포인트 05' 상태의 요약본입니다.*
